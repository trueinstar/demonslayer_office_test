<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>귀멸의칼날 직장인 버전 심리테스트</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 900px;
            width: 90%;
            text-align: center;
        }

        .start-screen h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .start-screen p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .main-image {
            width: 100%;
            max-width: 800px;
            height: 400px;
            border-radius: 15px;
            margin: 30px auto;
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .result-image {
            width: 100%;
            max-width: 800px;
            height: 400px;
            border-radius: 15px;
            margin: 20px auto;
            background: linear-gradient(45deg, #a8edea, #fed6e3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .compatibility-image {
            width: 300px;
            height: 300px;
            border-radius: 10px;
            margin: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #ffecd2, #fcb69f);
            color: #333;
            font-weight: bold;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .question {
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .option.selected {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .result-screen {
            display: none;
        }

        .result-screen.active {
            display: block;
        }

        .character-name {
            font-size: 2.5rem;
            color: #333;
            margin: 20px 0;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .character-description {
            font-size: 1.2rem;
            color: #555;
            line-height: 1.8;
            margin: 20px 0;
            text-align: left;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .compatibility-section {
            margin: 30px 0;
        }

        .compatibility-title {
            font-size: 1.5rem;
            color: #333;
            margin: 20px 0;
        }

        .hide {
            display: none !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .main-image, .result-image {
                height: 300px;
            }
            
            .compatibility-image {
                width: 45%;
                height: 200px;
                margin: 5px;
                font-size: 0.9rem;
            }
            
            .start-screen h1 {
                font-size: 2rem;
            }

            .character-name {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 시작 화면 -->
        <div class="start-screen" id="startScreen">
            <h1>🗾 귀멸의칼날 직장인 버전 🗾</h1>
            <p>당신은 어떤 귀멸의칼날 캐릭터와 닮았을까요?<br>직장인의 관점에서 알아보는 성격 테스트!</p>
            <div class="main-image">
                시작 화면 이미지<br>800x800
            </div>
            <button class="btn" onclick="startTest()">테스트 시작하기</button>
        </div>

        <!-- 질문 화면 -->
        <div class="question-container" id="questionContainer">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            <div class="question" id="questionText"></div>
            <div class="options" id="optionsContainer"></div>
            <div class="navigation">
                <button class="btn" id="prevBtn" onclick="prevQuestion()" style="display: none;">이전</button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>다음</button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div class="result-screen" id="resultScreen">
            <h2 class="character-name" id="characterName"></h2>
            <div class="result-image" id="resultImage"></div>
            <div class="character-description" id="characterDescription"></div>
            
            <div class="compatibility-section">
                <h3 class="compatibility-title">💕 나와 맞는 성향</h3>
                <div id="compatibleCharacters"></div>
            </div>
            
            <div class="compatibility-section">
                <h3 class="compatibility-title">⚡ 나와 안 맞는 성향</h3>
                <div id="incompatibleCharacters"></div>
            </div>
            
            <div style="margin-top: 40px;">
                <button class="btn" onclick="restartTest()">다시 테스트하기</button>
                <button class="btn" onclick="shareResult()">친구에게 공유하기</button>
            </div>
        </div>
    </div>

    <script>
        // 캐릭터 데이터
        const characters = {
            tanjiro: {
                name: '탄지로 (온화한 리더)',
                description: '당신은 팀을 이끄는 따뜻한 리더형입니다. 동료들의 어려움을 먼저 알아차리고, 항상 긍정적인 에너지로 팀 분위기를 좋게 만듭니다. 책임감이 강하고 모든 일에 최선을 다하는 성격으로, 상사와 동료들로부터 신뢰를 받습니다.',
                compatible: ['nezuko', 'mitsuri'],
                incompatible: ['muzan', 'sanemi']
            },
            nezuko: {
                name: '네즈코 (묵묵한 서포터)',
                description: '당신은 말은 적지만 행동으로 보여주는 타입입니다. 팀에서 없어서는 안 될 든든한 지원군 역할을 하며, 동료들이 어려울 때 조용히 도움을 줍니다. 겉으로는 무뚝뚝해 보이지만 속마음은 따뜻합니다.',
                compatible: ['tanjiro', 'giyu'],
                incompatible: ['tengen', 'inosuke']
            },
            zenitsu: {
                name: '젠이츠 (감성적인 완벽주의자)',
                description: '당신은 감수성이 풍부하고 디테일에 강한 완벽주의자입니다. 평소에는 걱정이 많고 소심해 보이지만, 정말 중요한 순간에는 놀라운 집중력을 발휘합니다. 동료들의 감정 변화를 민감하게 알아차립니다.',
                compatible: ['shinobu', 'mitsuri'],
                incompatible: ['inosuke', 'sanemi']
            },
            inosuke: {
                name: '이노스케 (열정적인 도전자)',
                description: '당신은 에너지가 넘치고 도전정신이 강한 타입입니다. 새로운 프로젝트나 어려운 업무도 두려워하지 않고 정면돌파하는 스타일이며, 경쟁심이 강해 항상 더 나은 결과를 위해 노력합니다.',
                compatible: ['tanjiro', 'rengoku'],
                incompatible: ['giyu', 'nezuko']
            },
            giyu: {
                name: '기유 (냉정한 전문가)',
                description: '당신은 감정보다는 논리를 중시하는 냉철한 판단력의 소유자입니다. 말수는 적지만 핵심을 찌르는 의견을 제시하며, 전문성이 뛰어나 어려운 문제 해결에 탁월한 능력을 보입니다.',
                compatible: ['nezuko', 'muichiro'],
                incompatible: ['tengen', 'mitsuri']
            },
            rengoku: {
                name: '렌고쿠 (열혈 멘토)',
                description: '당신은 불타는 열정과 긍정적인 에너지로 주변 사람들에게 동기부여를 주는 천성의 멘토입니다. 후배들을 아끼고 격려하는 것을 좋아하며, 어떤 상황에서도 포기하지 않는 강인한 정신력을 가지고 있습니다.',
                compatible: ['inosuke', 'mitsuri'],
                incompatible: ['muzan', 'akaza']
            },
            tengen: {
                name: '텐겐 (화려한 기획자)',
                description: '당신은 창의적이고 센스가 뛰어난 기획형 인재입니다. 남들이 생각하지 못한 참신한 아이디어를 제시하며, 프레젠테이션이나 기획 업무에서 두각을 나타냅니다. 화려한 것을 좋아하고 자신감이 넘칩니다.',
                compatible: ['shinobu', 'mitsuri'],
                incompatible: ['giyu', 'muichiro']
            },
            shinobu: {
                name: '시노부 (전략적 분석가)',
                description: '당신은 겉으로는 온화해 보이지만 속으로는 치밀하게 계산하는 전략가입니다. 상황을 객관적으로 분석하고 효율적인 해결책을 찾아내는 능력이 뛰어나며, 상대방의 심리를 잘 파악합니다.',
                compatible: ['zenitsu', 'tengen'],
                incompatible: ['inosuke', 'rengoku']
            },
            muichiro: {
                name: '무이치로 (몰입형 천재)',
                description: '당신은 자신만의 세계에 몰입하는 타입으로, 관심 있는 분야에서는 천재적인 능력을 발휘합니다. 평소에는 멍해 보이지만 집중할 때의 몰입도는 최고 수준입니다.',
                compatible: ['giyu', 'gyomei'],
                incompatible: ['tengen', 'sanemi']
            },
            mitsuri: {
                name: '미츠리 (사교적 에너지)',
                description: '당신은 밝고 사교적인 성격으로 팀의 분위기를 따뜻하게 만드는 능력이 있습니다. 동료들과의 관계를 중시하고, 팀워크를 통한 성과를 만들어내는 것을 좋아합니다.',
                compatible: ['tanjiro', 'rengoku'],
                incompatible: ['giyu', 'akaza']
            },
            sanemi: {
                name: '사네미 (직설적 실행가)',
                description: '당신은 직설적이고 결단력 있는 실행력의 소유자입니다. 돌려 말하는 것을 싫어하고 문제가 있으면 바로 해결하려고 하는 성격입니다. 위기 상황에서 누구보다 믿음직한 존재입니다.',
                compatible: ['gyomei', 'inosuke'],
                incompatible: ['tanjiro', 'zenitsu']
            },
            gyomei: {
                name: '교메이 (지혜로운 조언자)',
                description: '당신은 팀의 정신적 지주 역할을 하는 지혜로운 어른입니다. 풍부한 경험을 바탕으로 한 조언으로 동료들의 고민을 해결해주며, 침착하고 신중한 판단력을 가지고 있습니다.',
                compatible: ['muichiro', 'tanjiro'],
                incompatible: ['muzan', 'tengen']
            },
            muzan: {
                name: '무잔 (야심찬 개인주의자)',
                description: '당신은 강한 야심과 개인적 목표 달성에 집중하는 타입입니다. 리더십은 있지만 때로는 목표를 위해 수단과 방법을 가리지 않는 경향이 있습니다. 완벽주의적 성향이 강합니다.',
                compatible: ['akaza', 'iguro'],
                incompatible: ['tanjiro', 'rengoku']
            },
            akaza: {
                name: '아카자 (승부욕 강한 워커홀릭)',
                description: '당신은 일에 대한 열정이 남다르고 승부욕이 강한 워커홀릭입니다. 실력 향상과 성과 달성에 집착하며, 강한 상대나 어려운 도전을 오히려 즐깁니다.',
                compatible: ['muzan', 'sanemi'],
                incompatible: ['mitsuri', 'rengoku']
            },
            iguro: {
                name: '이구로 (신중한 비판가)',
                description: '당신은 매우 신중하고 분석적인 성격으로, 일을 시작하기 전에 충분히 검토하고 계획을 세우는 타입입니다. 비판적 사고력이 뛰어나 문제점을 잘 찾아냅니다.',
                compatible: ['muzan', 'shinobu'],
                incompatible: ['inosuke', 'tengen']
            }
        };

        // 질문 데이터
        const questions = [
            {
                question: "새로운 프로젝트 팀에 배정되었습니다. 첫 회의에서 당신의 행동은?",
                options: [
                    { text: "팀원들과 먼저 인사하며 화기애애한 분위기를 만든다", scores: { tanjiro: 3, mitsuri: 2, rengoku: 2 } },
                    { text: "조용히 앉아서 다른 사람들의 이야기를 들어본다", scores: { nezuko: 3, giyu: 2, muichiro: 2 } },
                    { text: "프로젝트 내용을 꼼꼼히 검토하고 질문을 준비한다", scores: { zenitsu: 2, shinobu: 3, iguro: 2 } },
                    { text: "일단 적극적으로 의견을 제시하며 존재감을 드러낸다", scores: { inosuke: 3, tengen: 2, sanemi: 2 } }
                ]
            },
            {
                question: "업무 중 예상치 못한 문제가 발생했습니다. 당신의 대응은?",
                options: [
                    { text: "차분히 상황을 분석하고 단계별 해결책을 찾는다", scores: { giyu: 3, shinobu: 2, gyomei: 2 } },
                    { text: "팀원들과 함께 브레인스토밍으로 해결책을 찾는다", scores: { tanjiro: 2, mitsuri: 3, rengoku: 2 } },
                    { text: "일단 행동하면서 부딪쳐 가며 해결한다", scores: { inosuke: 3, sanemi: 2, akaza: 2 } },
                    { text: "비슷한 사례를 찾아보고 신중하게 접근한다", scores: { zenitsu: 2, muichiro: 2, iguro: 3 } }
                ]
            },
            {
                question: "동료가 실수를 해서 팀 전체가 어려워졌습니다. 당신의 반응은?",
                options: [
                    { text: "동료를 위로하고 함께 해결방안을 찾아준다", scores: { tanjiro: 3, nezuko: 2, mitsuri: 2 } },
                    { text: "실수의 원인을 분석하고 재발방지책을 제시한다", scores: { shinobu: 3, giyu: 2, iguro: 2 } },
                    { text: "직설적으로 문제점을 지적하고 빠른 수습을 요구한다", scores: { sanemi: 3, muzan: 2, akaza: 2 } },
                    { text: "조용히 뒷처리를 도와주고 격려의 말을 건넨다", scores: { nezuko: 3, gyomei: 2, muichiro: 1 } }
                ]
            },
            {
                question: "중요한 발표를 앞두고 있습니다. 당신의 준비 스타일은?",
                options: [
                    { text: "화려하고 임팩트 있는 프레젠테이션을 준비한다", scores: { tengen: 3, rengoku: 2, muzan: 1 } },
                    { text: "데이터와 논리로 완벽하게 무장한다", scores: { shinobu: 3, giyu: 2, iguro: 2 } },
                    { text: "청중의 관점에서 이해하기 쉽게 구성한다", scores: { tanjiro: 2, mitsuri: 3, gyomei: 2 } },
                    { text: "핵심만 간단명료하게 정리한다", scores: { nezuko: 2, sanemi: 3, muichiro: 2 } }
                ]
            },
            {
                question: "팀 내에서 의견 충돌이 발생했습니다. 당신의 역할은?",
                options: [
                    { text: "중재자가 되어 양쪽 의견을 조율한다", scores: { tanjiro: 3, gyomei: 3, mitsuri: 1 } },
                    { text: "논리적 근거를 제시하며 합리적 해결책을 찾는다", scores: { shinobu: 3, giyu: 2, muichiro: 1 } },
                    { text: "강하게 자신의 의견을 주장한다", scores: { sanemi: 3, inosuke: 2, muzan: 2 } },
                    { text: "상황을 지켜보며 필요할 때만 개입한다", scores: { nezuko: 3, zenitsu: 2, iguro: 2 } }
                ]
            },
            {
                question: "야근이 불가피한 상황입니다. 당신의 마음가짐은?",
                options: [
                    { text: "팀원들과 함께 힘내자며 분위기를 북돋운다", scores: { rengoku: 3, tanjiro: 2, mitsuri: 2 } },
                    { text: "효율적으로 일을 분담해서 빨리 끝내자고 제안한다", scores: { shinobu: 3, giyu: 2, sanemi: 1 } },
                    { text: "묵묵히 자신의 몫을 다한다", scores: { nezuko: 3, gyomei: 2, muichiro: 2 } },
                    { text: "스트레스를 받지만 결과를 위해 최선을 다한다", scores: { zenitsu: 3, akaza: 2, iguro: 1 } }
                ]
            },
            {
                question: "새로운 기술이나 시스템을 도입해야 합니다. 당신의 반응은?",
                options: [
                    { text: "흥미롭다며 빠르게 익혀서 활용방안을 찾는다", scores: { inosuke: 3, tengen: 2, akaza: 2 } },
                    { text: "신중하게 장단점을 분석한 후 도입을 결정한다", scores: { iguro: 3, shinobu: 2, gyomei: 2 } },
                    { text: "팀원들과 함께 스터디를 만들어 같이 배운다", scores: { tanjiro: 2, mitsuri: 3, rengoku: 2 } },
                    { text: "개인적으로 깊이 파고들어 마스터한다", scores: { muichiro: 3, giyu: 2, zenitsu: 1 } }
                ]
            },
            {
                question: "후배나 신입사원을 지도하게 되었습니다. 당신의 방식은?",
                options: [
                    { text: "열정적으로 격려하며 동기부여를 해준다", scores: { rengoku: 3, tanjiro: 2, mitsuri: 2 } },
                    { text: "체계적인 커리큘럼을 만들어 단계별로 가르친다", scores: { shinobu: 2, gyomei: 3, iguro: 2 } },
                    { text: "실전 경험을 쌓을 수 있도록 도전적인 업무를 맡긴다", scores: { sanemi: 2, inosuke: 2, akaza: 3 } },
                    { text: "옆에서 조용히 지켜보며 필요할 때 도움을 준다", scores: { nezuko: 3, giyu: 2, muichiro: 1 } }
                ]
            },
            {
                question: "회사 워크샵이나 팀 빌딩 행사에서 당신은?",
                options: [
                    { text: "적극적으로 참여하며 분위기를 이끈다", scores: { tengen: 3, mitsuri: 2, rengoku: 2 } },
                    { text: "적당히 참여하면서 동료들과 대화를 나눈다", scores: { tanjiro: 2, gyomei: 2, zenitsu: 2 } },
                    { text: "의무적으로 참석하지만 조용히 있는다", scores: { nezuko: 3, giyu: 3, muichiro: 2 } },
                    { text: "참여는 하지만 개인적인 시간을 선호한다", scores: { sanemi: 1, iguro: 3, akaza: 2 } }
                ]
            },
            {
                question: "동료가 당신에게 개인적인 고민을 털어놓습니다. 당신의 반응은?",
                options: [
                    { text: "진심으로 들어주고 위로와 조언을 해준다", scores: { tanjiro: 3, mitsuri: 2, gyomei: 2 } },
                    { text: "객관적인 관점에서 해결책을 제시한다", scores: { shinobu: 3, giyu: 2, iguro: 1 } },
                    { text: "공감하며 감정적으로 지지해준다", scores: { nezuko: 2, zenitsu: 3, mitsuri: 2 } },
                    { text: "간단한 조언만 하고 개인 문제에는 깊이 관여하지 않는다", scores: { sanemi: 2, muzan: 3, akaza: 2 } }
                ]
            },
            {
                question: "프로젝트 마감이 임박했는데 완성도가 아쉽습니다. 당신의 선택은?",
                options: [
                    { text: "밤새워서라도 완벽하게 만든다", scores: { zenitsu: 3, akaza: 2, iguro: 2 } },
                    { text: "팀원들과 함께 최선을 다해 마감을 맞춘다", scores: { tanjiro: 3, rengoku: 2, mitsuri: 2 } },
                    { text: "현실적인 선에서 타협하며 다음을 위한 교훈으로 삼는다", scores: { gyomei: 3, shinobu: 2, giyu: 2 } },
                    { text: "담당자에게 직접적으로 연장을 요청한다", scores: { sanemi: 3, muzan: 2, tengen: 1 } }
                ]
            },
            {
                question: "마지막으로, 직장에서 가장 중요하게 생각하는 가치는?",
                options: [
                    { text: "팀워크와 동료애", scores: { tanjiro: 3, nezuko: 2, mitsuri: 2, gyomei: 1 } },
                    { text: "전문성과 효율성", scores: { giyu: 3, shinobu: 3, muichiro: 2, iguro: 2 } },
                    { text: "도전과 성장", scores: { inosuke: 2, rengoku: 2, akaza: 3, tengen: 2 } },
                    { text: "개인의 성공과 성취", scores: { muzan: 3, sanemi: 1, zenitsu: 1, akaza: 1 } }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = {};
        let scores = {};

        // 점수 초기화
        function initializeScores() {
            Object.keys(characters).forEach(char => {
                scores[char] = 0;
            });
        }

        function startTest() {
            initializeScores();
            currentQuestion = 0;
            answers = {};
            
            document.getElementById('startScreen').classList.add('hide');
            document.getElementById('questionContainer').classList.add('active');
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                showResult();
                return;
            }

            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.classList.add('option');
                optionDiv.textContent = option.text;
                optionDiv.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionDiv);
            });

            // 진행률 업데이트
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // 이전 답변이 있으면 표시
            if (answers[currentQuestion] !== undefined) {
                const options = document.querySelectorAll('.option');
                options[answers[currentQuestion]].classList.add('selected');
                document.getElementById('nextBtn').disabled = false;
            } else {
                document.getElementById('nextBtn').disabled = true;
            }

            // 버튼 상태 업데이트
            document.getElementById('prevBtn').style.display = currentQuestion > 0 ? 'block' : 'none';
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? '결과 보기' : '다음';
        }

        function selectOption(optionIndex) {
            answers[currentQuestion] = optionIndex;
            
            // 선택된 옵션 표시
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[optionIndex].classList.add('selected');
            
            // 다음 버튼 활성화
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) return;
            
            // 점수 계산
            const selectedOption = questions[currentQuestion].options[answers[currentQuestion]];
            if (selectedOption && selectedOption.scores) {
                Object.entries(selectedOption.scores).forEach(([char, score]) => {
                    if (scores[char] !== undefined) {
                        scores[char] += score;
                    }
                });
            }

            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                // 이전 질문의 점수 제거
                if (answers[currentQuestion - 1] !== undefined) {
                    const prevOption = questions[currentQuestion - 1].options[answers[currentQuestion - 1]];
                    if (prevOption && prevOption.scores) {
                        Object.entries(prevOption.scores).forEach(([char, score]) => {
                            if (scores[char] !== undefined) {
                                scores[char] -= score;
                            }
                        });
                    }
                }
                
                currentQuestion--;
                showQuestion();
            }
        }

        function showResult() {
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            
            // 최고 점수 캐릭터 찾기
            const maxScore = Math.max(...Object.values(scores));
            const resultCharacter = Object.keys(scores).find(char => scores[char] === maxScore) || 'tanjiro';
            
            const character = characters[resultCharacter];
            
            document.getElementById('characterName').textContent = character.name;
            document.getElementById('resultImage').textContent = `${character.name}\n결과 이미지\n800x800`;
            document.getElementById('characterDescription').textContent = character.description;
            
            // 맞는 성향 캐릭터들
            const compatibleContainer = document.getElementById('compatibleCharacters');
            compatibleContainer.innerHTML = '';
            character.compatible.forEach(charKey => {
                if (characters[charKey]) {
                    const div = document.createElement('div');
                    div.classList.add('compatibility-image');
                    div.textContent = characters[charKey].name.split(' ')[0] + '\n300x300';
                    compatibleContainer.appendChild(div);
                }
            });
            
            // 안 맞는 성향 캐릭터들
            const incompatibleContainer = document.getElementById('incompatibleCharacters');
            incompatibleContainer.innerHTML = '';
            character.incompatible.forEach(charKey => {
                if (characters[charKey]) {
                    const div = document.createElement('div');
                    div.classList.add('compatibility-image');
                    div.textContent = characters[charKey].name.split(' ')[0] + '\n300x300';
                    incompatibleContainer.appendChild(div);
                }
            });

            // URL에 결과 저장 (공유용)
            const url = new URL(window.location);
            url.searchParams.set('result', resultCharacter);
            window.history.replaceState({}, '', url);
        }

        function restartTest() {
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('startScreen').classList.remove('hide');
            
            // URL 파라미터 제거
            const url = new URL(window.location);
            url.searchParams.delete('result');
            window.history.replaceState({}, '', url);
        }

        function shareResult() {
            const currentUrl = window.location.href;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(currentUrl).then(() => {
                    alert('결과 페이지 링크가 복사되었습니다!\n친구들에게 공유해보세요 🎉');
                }).catch(() => {
                    fallbackCopyText(currentUrl);
                });
            } else {
                fallbackCopyText(currentUrl);
            }
        }

        function fallbackCopyText(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('결과 페이지 링크가 복사되었습니다!\n친구들에게 공유해보세요 🎉');
            } catch (err) {
                alert('링크 복사에 실패했습니다. 수동으로 복사해주세요:\n' + text);
            }
            
            document.body.removeChild(textArea);
        }

        // 페이지 로드 시 URL 파라미터 확인
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const result = urlParams.get('result');
            
            if (result && characters[result]) {
                // 공유된 결과 직접 표시
                document.getElementById('startScreen').classList.add('hide');
                document.getElementById('resultScreen').classList.add('active');
                
                const character = characters[result];
                document.getElementById('characterName').textContent = character.name;
                document.getElementById('resultImage').textContent = `${character.name}\n결과 이미지\n800x800`;
                document.getElementById('characterDescription').textContent = character.description;
                
                // 맞는 성향 캐릭터들
                const compatibleContainer = document.getElementById('compatibleCharacters');
                compatibleContainer.innerHTML = '';
                character.compatible.forEach(charKey => {
                    if (characters[charKey]) {
                        const div = document.createElement('div');
                        div.classList.add('compatibility-image');
                        div.textContent = characters[charKey].name.split(' ')[0] + '\n300x300';
                        compatibleContainer.appendChild(div);
                    }
                });
                
                // 안 맞는 성향 캐릭터들
                const incompatibleContainer = document.getElementById('incompatibleCharacters');
                incompatibleContainer.innerHTML = '';
                character.incompatible.forEach(charKey => {
                    if (characters[charKey]) {
                        const div = document.createElement('div');
                        div.classList.add('compatibility-image');
                        div.textContent = characters[charKey].name.split(' ')[0] + '\n300x300';
                        incompatibleContainer.appendChild(div);
                    }
                });
            }
        });
    </script>
</body>
</html>
