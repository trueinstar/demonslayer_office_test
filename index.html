<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>귀멸의 칼날 직장인 성향 테스트</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            overflow: hidden;
            position: relative;
        }

        .start-screen, .question-screen, .result-screen {
            padding: 40px;
            text-align: center;
        }

        .start-screen h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .start-image {
            width: 300px;
            height: 300px;
            margin: 30px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .start-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .question-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            margin: -40px -40px 30px -40px;
        }

        .question-number {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .question-text {
            font-size: 1.5rem;
            margin-top: 10px;
            font-weight: 600;
        }

        .answers {
            display: grid;
            gap: 15px;
            margin: 30px 0;
        }

        .answer-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .answer-btn:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .nav-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: #495057;
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-screen {
            display: none;
        }

        .result-screen.active {
            display: block;
        }

        .result-character {
            margin: 30px 0;
        }

        .character-name {
            font-size: 2rem;
            color: #333;
            margin-bottom: 5px;
        }

        .character-title {
            font-size: 1.3rem;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .character-subtitle {
            font-size: 1.1rem;
            color: #6c757d;
            margin-bottom: 20px;
        }

        .result-image {
            width: 300px;
            height: 300px;
            margin: 20px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .result-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .character-description {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
            margin: 20px 0;
            text-align: left;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .compatibility-section {
            margin: 30px 0;
        }

        .compatibility-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
        }

        .compatibility-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .compatibility-item {
            text-align: center;
        }

        .compatibility-item h4 {
            margin-bottom: 10px;
            color: #28a745;
        }

        .compatibility-item.incompatible h4 {
            color: #dc3545;
        }

        .compat-images {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .compat-image {
            width: 120px;
            height: 120px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .compat-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .hidden {
            display: none !important;
        }

        .emoji {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .container {
                width: 95%;
                margin: 20px;
            }
            
            .start-screen, .question-screen, .result-screen {
                padding: 20px;
            }
            
            .start-image, .result-image {
                width: 250px;
                height: 250px;
            }
            
            .compat-image {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 시작 화면 -->
        <div id="startScreen" class="start-screen">
            <h1>귀멸의 칼날 직장인 성향 테스트</h1>
            <div class="start-image">
                <img src="images/start/main.jpg" alt="시작 이미지" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZjBmMGYwIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuydtOuvuOyngDwvdGV4dD4KPHN2Zz4K'">
            </div>
            <p style="font-size: 1.2rem; color: #666; margin: 20px 0;">당신의 직장 내 성향을 알아보세요!</p>
            <button class="btn" onclick="startTest()">테스트 시작하기</button>
        </div>

        <!-- 질문 화면 -->
        <div id="questionScreen" class="question-screen hidden">
            <div class="question-header">
                <div class="question-number">질문 <span id="currentQuestionNum">1</span> / 12</div>
                <div class="question-text" id="questionText">질문이 여기에 표시됩니다</div>
            </div>
            
            <div class="answers" id="answersContainer">
                <!-- 답변 옵션들이 동적으로 생성됩니다 -->
            </div>

            <div class="navigation">
                <button class="nav-btn" id="prevBtn" onclick="previousQuestion()" disabled>이전</button>
                <div style="text-align: center;">
                    <div style="font-size: 0.9rem; color: #666;">진행률</div>
                    <div style="background: #e9ecef; height: 8px; width: 200px; border-radius: 4px; margin: 5px auto;">
                        <div id="progressBar" style="background: linear-gradient(45deg, #667eea, #764ba2); height: 100%; border-radius: 4px; width: 8.33%; transition: width 0.3s ease;"></div>
                    </div>
                </div>
                <button class="nav-btn" id="nextBtn" onclick="nextQuestion()" disabled>다음</button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div id="resultScreen" class="result-screen">
            <div class="emoji" id="resultEmoji">🌱</div>
            <h2 class="character-name" id="characterName">캐릭터 이름</h2>
            <h3 class="character-title" id="characterTitle">직업 타이틀</h3>
            <h4 class="character-subtitle" id="characterSubtitle">부제목</h4>
            
            <div class="result-image">
                <img id="resultImage" src="" alt="결과 캐릭터">
            </div>
            
            <div class="character-description" id="characterDescription">
                캐릭터 설명이 여기에 표시됩니다.
            </div>

            <div class="compatibility-section">
                <div class="compatibility-grid">
                    <div class="compatibility-item">
                        <h4>✨ 나와 잘 맞는 성향</h4>
                        <div class="compat-images" id="compatibleImages">
                            <!-- 궁합이 좋은 캐릭터 이미지들 -->
                        </div>
                    </div>
                    <div class="compatibility-item incompatible">
                        <h4>⚡ 나와 안 맞는 성향</h4>
                        <div class="compat-images" id="incompatibleImages">
                            <!-- 궁합이 안 좋은 캐릭터 이미지들 -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="result-actions">
                <button class="btn" onclick="restartTest()">다시 테스트하기</button>
                <button class="btn" onclick="shareResult()">친구에게 공유하기</button>
            </div>
        </div>
    </div>

    <script>
        // 캐릭터 데이터
        const characters = {
            tanjiro: {
                name: '카마도 탄지로',
                title: '팀워크의 달인',
                subtitle: '프로젝트 매니저',
                emoji: '🌱',
                description: '당신은 팀워크를 중시하고 모든 구성원을 배려하는 완벽한 프로젝트 매니저입니다. 어려운 상황에서도 포기하지 않는 끈기와 팀원들을 하나로 묶는 특별한 능력을 가지고 있습니다. 갈등 상황에서는 중재자 역할을 하며, 항상 긍정적인 에너지로 팀 분위기를 이끌어갑니다.',
                compatible: ['nezuko', 'mitsuri'],
                incompatible: ['muzan', 'sanemi']
            },
            nezuko: {
                name: '카마도 네즈코',
                title: '묵묵한 지원자',
                subtitle: '백오피스 전문가',
                emoji: '🌸',
                description: '당신은 말보다는 행동으로 보여주는 신뢰할 수 있는 백오피스 전문가입니다. 화려하지 않지만 꼭 필요한 업무를 완벽하게 처리하며, 팀원들이 안심하고 일할 수 있는 든든한 지원을 제공합니다. 조용하지만 강한 의지력으로 어떤 난관도 극복해냅니다.',
                compatible: ['tanjiro', 'giyu'],
                incompatible: ['tengen', 'inosuke']
            },
            zenitsu: {
                name: '아가츠마 젠이츠',
                title: '완벽주의자',
                subtitle: '품질관리 전문가',
                emoji: '⚡',
                description: '당신은 디테일에 강하고 품질에 대한 높은 기준을 가진 완벽주의자입니다. 평소에는 걱정이 많지만, 중요한 순간에는 놀라운 집중력과 전문성을 발휘합니다. 실수를 용납하지 않는 철저함으로 최고 품질의 결과물을 만들어냅니다.',
                compatible: ['shinobu', 'mitsuri'],
                incompatible: ['inosuke', 'sanemi']
            },
            inosuke: {
                name: '하시비라 이노스케',
                title: '도전정신 넘치는',
                subtitle: '영업팀 에이스',
                emoji: '🐗',
                description: '당신은 넘치는 에너지와 도전정신으로 무장한 영업팀의 에이스입니다. 어떤 어려운 고객이라도 정면승부로 돌파하며, 경쟁 상황에서 더욱 빛을 발합니다. 때로는 무모해 보일 수 있지만, 그 열정과 추진력으로 불가능을 가능하게 만듭니다.',
                compatible: ['tanjiro', 'rengoku'],
                incompatible: ['giyu', 'nezuko']
            },
            giyu: {
                name: '토미오카 기유',
                title: '냉철한 분석가',
                subtitle: '전략기획팀장',
                emoji: '🌊',
                description: '당신은 감정에 휘둘리지 않고 냉철하게 상황을 분석하는 전략기획 전문가입니다. 말수는 적지만 핵심을 정확히 파악하고, 논리적이고 체계적인 접근으로 최적의 해결책을 제시합니다. 혼자서도 묵묵히 성과를 만들어내는 독립적인 업무 스타일을 가지고 있습니다.',
                compatible: ['nezuko', 'muichiro'],
                incompatible: ['tengen', 'mitsuri']
            },
            rengoku: {
                name: '렌고쿠 쿄쥬로',
                title: '열정적인 리더',
                subtitle: '팀장',
                emoji: '🔥',
                description: '당신은 불타는 열정으로 팀을 이끄는 천생 리더입니다. 긍정적인 에너지와 강한 신념으로 팀원들에게 영감을 주며, 어려운 상황에서도 희망을 잃지 않습니다. 솔선수범하는 모습으로 팀원들의 존경을 받고, 모든 사람의 성장을 진심으로 응원합니다.',
                compatible: ['inosuke', 'mitsuri'],
                incompatible: ['muzan', 'akaza']
            },
            tengen: {
                name: '우즈이 텐겐',
                title: '화려한 크리에이터',
                subtitle: '마케팅 디렉터',
                emoji: '💎',
                description: '당신은 창의성과 화려함을 겸비한 마케팅의 달인입니다. 독특하고 임팩트 있는 아이디어로 사람들의 관심을 사로잡으며, 트렌드를 선도하는 감각을 가지고 있습니다. 자신감 넘치는 스타일로 브랜드의 가치를 높이고, 시장에서 차별화된 포지션을 만들어냅니다.',
                compatible: ['shinobu', 'mitsuri'],
                incompatible: ['giyu', 'muichiro']
            },
            shinobu: {
                name: '코쵸 시노부',
                title: '전략적 기획자',
                subtitle: '경영전략팀',
                emoji: '🦋',
                description: '당신은 우아하면서도 날카로운 통찰력을 가진 전략적 사고의 전문가입니다. 겉으로는 부드럽지만 속으로는 치밀하게 계획을 세우며, 상대방의 심리를 정확히 파악하여 최적의 전략을 수립합니다. 복잡한 상황에서도 침착하게 핵심을 찾아내는 능력이 뛰어납니다.',
                compatible: ['zenitsu', 'tengen'],
                incompatible: ['inosuke', 'rengoku']
            },
            muichiro: {
                name: '토키토 무이치로',
                title: '집중력의 달인',
                subtitle: '개발자',
                emoji: '☁️',
                description: '당신은 놀라운 집중력으로 복잡한 문제를 해결하는 개발 전문가입니다. 주변의 소음에 흔들리지 않고 자신만의 세계에서 몰입하여 뛰어난 결과물을 만들어냅니다. 때로는 몽환적으로 보일 수 있지만, 핵심 순간에는 번개 같은 직감과 실행력을 보여줍니다.',
                compatible: ['giyu', 'gyomei'],
                incompatible: ['tengen', 'sanemi']
            },
            mitsuri: {
                name: '칸로지 미츠리',
                title: '소통의 전문가',
                subtitle: '인사팀 매니저',
                emoji: '💕',
                description: '당신은 밝고 따뜻한 성격으로 사람들과의 소통을 즐기는 인사 전문가입니다. 팀원들의 고민을 진심으로 들어주고, 모든 사람이 편안하게 일할 수 있는 환경을 만듭니다. 강한 공감 능력과 포용력으로 조직의 화합을 이끌어내는 특별한 재능을 가지고 있습니다.',
                compatible: ['tanjiro', 'rengoku'],
                incompatible: ['giyu', 'akaza']
            },
            sanemi: {
                name: '시나즈가와 사네미',
                title: '강인한 실행자',
                subtitle: '현장관리팀장',
                emoji: '💨',
                description: '당신은 거친 외모 뒤에 강한 책임감을 가진 현장 관리의 전문가입니다. 타협하지 않는 원칙주의자로서 품질과 안전에 대한 기준이 매우 높으며, 어려운 상황에서도 팀을 보호하기 위해 앞장섭니다. 직설적인 소통 방식이지만 진심어린 배려가 담겨있습니다.',
                compatible: ['gyomei', 'inosuke'],
                incompatible: ['tanjiro', 'zenitsu']
            },
            gyomei: {
                name: '히메지마 교메이',
                title: '신중한 관리자',
                subtitle: '운영총괄임원',
                emoji: '🏔️',
                description: '당신은 깊은 경험과 통찰력을 바탕으로 조직 전체를 관리하는 운영 총괄 전문가입니다. 신중하고 사려깊은 판단으로 큰 그림을 그리며, 모든 결정에 책임을 집니다. 팀원들에게는 든든한 버팀목이 되어주며, 위기 상황에서도 흔들리지 않는 안정감을 제공합니다.',
                compatible: ['muichiro', 'tanjiro'],
                incompatible: ['muzan', 'tengen']
            },
            muzan: {
                name: '키부츠지 무잔',
                title: '절대적 권력자',
                subtitle: 'CEO',
                emoji: '👑',
                description: '당신은 카리스마와 강력한 리더십으로 조직을 이끄는 최고경영자입니다. 높은 기준과 완벽을 추구하며, 결과에 대한 책임을 철저히 집니다. 때로는 냉혹해 보일 수 있지만, 조직의 성공을 위해서는 어떤 어려운 결정도 내릴 수 있는 강한 의지력을 가지고 있습니다.',
                compatible: ['akaza', 'iguro'],
                incompatible: ['tanjiro', 'rengoku']
            },
            akaza: {
                name: '아카자',
                title: '성과주의자',
                subtitle: '영업총괄',
                emoji: '👊',
                description: '당신은 끝없는 성장 욕구와 경쟁심으로 무장한 영업 총괄 전문가입니다. 목표 달성에 대한 집착이 강하며, 자신과 팀의 한계를 뛰어넘기 위해 끊임없이 노력합니다. 강한 실적 압박 속에서도 더 높은 성과를 향해 전진하는 불굴의 정신력을 가지고 있습니다.',
                compatible: ['muzan', 'sanemi'],
                incompatible: ['mitsuri', 'rengoku']
            },
            iguro: {
                name: '이구로 오바나이',
                title: '엄격한 관리자',
                subtitle: '컴플라이언스 팀장',
                emoji: '🐍',
                description: '당신은 높은 기준과 철저한 원칙으로 무장한 컴플라이언스 전문가입니다. 세심한 관찰력으로 작은 허점도 놓치지 않으며, 규정과 절차를 완벽하게 준수합니다. 때로는 까다롭게 느껴질 수 있지만, 조직의 리스크를 사전에 차단하고 품질을 보장하는 핵심적인 역할을 담당합니다. 신뢰할 수 있는 사람에게만 마음을 여는 신중하고 완고한 전문가입니다.',
                compatible: ['muzan', 'shinobu'],
                incompatible: ['inosuke', 'tengen']
            }
        };

        // 질문 데이터
        const questions = [
            {
                question: "새로운 프로젝트가 시작될 때, 당신의 첫 번째 행동은?",
                answers: [
                    { text: "팀원들과 함께 브레인스토밍 세션을 진행한다", scores: { tanjiro: 3, mitsuri: 2, rengoku: 2 } },
                    { text: "혼자서 철저히 계획을 세운 후 팀에 제시한다", scores: { giyu: 3, muichiro: 2, shinobu: 2 } },
                    { text: "바로 실행에 옮기며 진행하면서 수정한다", scores: { inosuke: 3, sanemi: 2, akaza: 2 } },
                    { text: "기존 사례를 분석하고 체계적으로 접근한다", scores: { gyomei: 3, iguro: 2, nezuko: 2 } }
                ]
            },
            {
                question: "회의에서 의견 충돌이 발생했을 때, 당신은?",
                answers: [
                    { text: "중재자 역할을 하며 모두가 만족할 해결책을 찾는다", scores: { tanjiro: 3, mitsuri: 2, gyomei: 1 } },
                    { text: "논리적 근거를 제시하며 최적의 방안을 설득한다", scores: { giyu: 3, shinobu: 2, muichiro: 1 } },
                    { text: "강하게 내 의견을 주장하며 밀어붙인다", scores: { inosuke: 3, sanemi: 2, muzan: 2 } },
                    { text: "조용히 듣고 있다가 적절한 타이밍에 의견을 제시한다", scores: { nezuko: 3, zenitsu: 2, iguro: 1 } }
                ]
            },
            {
                question: "업무 스타일에서 가장 중요하게 생각하는 것은?",
                answers: [
                    { text: "팀원들과의 협력과 소통", scores: { tanjiro: 3, mitsuri: 3, rengoku: 2 } },
                    { text: "정확성과 완벽한 결과물", scores: { zenitsu: 3, iguro: 2, giyu: 2 } },
                    { text: "빠른 실행력과 결과 도출", scores: { inosuke: 3, akaza: 3, sanemi: 2 } },
                    { text: "체계적인 계획과 안정성", scores: { gyomei: 3, nezuko: 2, muichiro: 2 } }
                ]
            },
            {
                question: "스트레스를 받는 상황에서 당신의 반응은?",
                answers: [
                    { text: "팀원들과 대화하며 함께 해결책을 찾는다", scores: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "혼자만의 시간을 가지며 차분히 정리한다", scores: { giyu: 3, muichiro: 3, nezuko: 2 } },
                    { text: "더욱 적극적으로 문제에 맞서 해결한다", scores: { inosuke: 3, sanemi: 2, akaza: 2 } },
                    { text: "세심하게 모든 가능성을 검토한다", scores: { zenitsu: 3, shinobu: 2, iguro: 2 } }
                ]
            },
            {
                question: "팀 내에서 당신의 역할은?",
                answers: [
                    { text: "팀원들을 격려하고 동기부여하는 리더", scores: { rengoku: 3, tanjiro: 2, mitsuri: 2 } },
                    { text: "묵묵히 뒷바라지하는 든든한 지원자", scores: { nezuko: 3, gyomei: 2, giyu: 1 } },
                    { text: "창의적 아이디어를 제시하는 기획자", scores: { tengen: 3, shinobu: 2, muichiro: 1 } },
                    { text: "품질과 완성도를 책임지는 관리자", scores: { zenitsu: 3, iguro: 2, sanemi: 2 } }
                ]
            },
            {
                question: "새로운 아이디어나 제안을 받았을 때?",
                answers: [
                    { text: "일단 긍정적으로 받아들이고 함께 발전시킨다", scores: { tanjiro: 3, mitsuri: 3, rengoku: 2 } },
                    { text: "신중하게 검토한 후 의견을 제시한다", scores: { gyomei: 3, giyu: 2, iguro: 2 } },
                    { text: "바로 실행 가능성을 따져보며 현실적으로 접근한다", scores: { sanemi: 3, akaza: 2, nezuko: 1 } },
                    { text: "더 창의적이고 독특한 방향으로 발전시킨다", scores: { tengen: 3, shinobu: 2, muichiro: 1 } }
                ]
            },
            {
                question: "실패나 실수를 했을 때의 당신의 행동은?",
                answers: [
                    { text: "팀원들에게 사과하고 함께 해결책을 찾는다", scores: { tanjiro: 3, mitsuri: 2, gyomei: 1 } },
                    { text: "원인을 철저히 분석하고 재발 방지책을 마련한다", scores: { zenitsu: 3, iguro: 3, giyu: 2 } },
                    { text: "빠르게 수습하고 더 강하게 재도전한다", scores: { inosuke: 3, sanemi: 2, akaza: 2 } },
                    { text: "조용히 혼자서 문제를 해결한다", scores: { nezuko: 3, muichiro: 2, shinobu: 1 } }
                ]
            },
            {
                question: "동료와의 갈등 상황에서?",
                answers: [
                    { text: "직접 대화를 통해 서로를 이해하려 노력한다", scores: { tanjiro: 3, mitsuri: 3, rengoku: 2 } },
                    { text: "객관적인 자료와 사실로 설득한다", scores: { giyu: 3, shinobu: 2, muzan: 1 } },
                    { text: "명확하고 직설적으로 내 입장을 전달한다", scores: { sanemi: 3, inosuke: 2, akaza: 2 } },
                    { text: "시간을 두고 상황이 자연스럽게 해결되기를 기다린다", scores: { nezuko: 3, muichiro: 2, gyomei: 1 } }
                ]
            },
            {
                question: "업무 환경에서 선호하는 분위기는?",
                answers: [
                    { text: "활발하고 에너지 넘치는 분위기", scores: { rengoku: 3, inosuke: 3, mitsuri: 2 } },
                    { text: "조용하고 집중할 수 있는 분위기", scores: { giyu: 3, muichiro: 3, nezuko: 2 } },
                    { text: "창의적이고 자유로운 분위기", scores: { tengen: 3, shinobu: 2, tanjiro: 1 } },
                    { text: "체계적이고 안정적인 분위기", scores: { gyomei: 3, zenitsu: 2, iguro: 2 } }
                ]
            },
            {
                question: "중요한 결정을 내려야 할 때?",
                answers: [
                    { text: "팀원들의 의견을 충분히 수렴한 후 결정한다", scores: { tanjiro: 3, mitsuri: 2, gyomei: 2 } },
                    { text: "데이터와 논리적 분석을 바탕으로 결정한다", scores: { giyu: 3, shinobu: 3, muzan: 2 } },
                    { text: "직감과 경험을 믿고 빠르게 결정한다", scores: { inosuke: 3, rengoku: 2, akaza: 2 } },
                    { text: "모든 가능성을 검토하고 신중하게 결정한다", scores: { zenitsu: 3, iguro: 2, nezuko: 1 } }
                ]
            },
            {
                question: "성과나 성공을 이뤘을 때?",
                answers: [
                    { text: "팀원들과 함께 기쁨을 나누고 모두를 격려한다", scores: { tanjiro: 3, mitsuri: 3, rengoku: 3 } },
                    { text: "조용히 만족하며 다음 목표를 설정한다", scores: { giyu: 3, nezuko: 2, muichiro: 2 } },
                    { text: "더 큰 도전과 목표를 향해 전진한다", scores: { akaza: 3, inosuke: 2, muzan: 2 } },
                    { text: "완벽했는지 다시 한 번 점검한다", scores: { zenitsu: 3, iguro: 3, shinobu: 2 } }
                ]
            },
            {
                question: "업무에서 가장 큰 동기부여를 받는 순간은?",
                answers: [
                    { text: "팀원들과 함께 목표를 달성했을 때", scores: { tanjiro: 3, mitsuri: 3, rengoku: 2 } },
                    { text: "완벽한 결과물을 만들어냈을 때", scores: { zenitsu: 3, iguro: 3, giyu: 2 } },
                    { text: "어려운 도전을 극복했을 때", scores: { inosuke: 3, sanemi: 3, akaza: 2 } },
                    { text: "조용히 인정받고 신뢰받을 때", scores: { nezuko: 3, muichiro: 2, gyomei: 2 } }
                ]
            }
        ];

        // 테스트 상태
        let currentQuestion = 0;
        let answers = [];
        let scores = {};

        // 이미지 확장자 지원
        function findImagePath(basePath) {
            const extensions = ['.jpg', '.jpeg', '.png'];
            const defaultImage = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZjBmMGYwIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuydtOuvuOyngDwvdGV4dD4KPHN2Zz4K';
            
            // 첫 번째 확장자로 시도
            return basePath + extensions[0];
        }

        // 테스트 시작
        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('questionScreen').classList.remove('hidden');
            showQuestion();
        }

        // 질문 표시
        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('currentQuestionNum').textContent = currentQuestion + 1;
            document.getElementById('questionText').textContent = question.question;
            
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const answerBtn = document.createElement('div');
                answerBtn.className = 'answer-btn';
                answerBtn.textContent = answer.text;
                answerBtn.onclick = () => selectAnswer(index);
                answersContainer.appendChild(answerBtn);
            });
            
            // 진행률 업데이트
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // 버튼 상태 업데이트
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = true;
        }

        // 답변 선택
        function selectAnswer(answerIndex) {
            // 기존 선택 제거
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.style.background = '#f8f9fa';
                btn.style.borderColor = '#e9ecef';
            });
            
            // 새 선택 표시
            const selectedBtn = document.querySelectorAll('.answer-btn')[answerIndex];
            selectedBtn.style.background = '#e3f2fd';
            selectedBtn.style.borderColor = '#667eea';
            
            answers[currentQuestion] = answerIndex;
            document.getElementById('nextBtn').disabled = false;
        }

        // 다음 질문
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
                
                // 이미 답변한 질문이면 선택 상태 복원
                if (answers[currentQuestion] !== undefined) {
                    const selectedBtn = document.querySelectorAll('.answer-btn')[answers[currentQuestion]];
                    selectedBtn.style.background = '#e3f2fd';
                    selectedBtn.style.borderColor = '#667eea';
                    document.getElementById('nextBtn').disabled = false;
                }
            } else {
                calculateResult();
            }
        }

        // 이전 질문
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
                
                // 이미 답변한 질문이면 선택 상태 복원
                if (answers[currentQuestion] !== undefined) {
                    const selectedBtn = document.querySelectorAll('.answer-btn')[answers[currentQuestion]];
                    selectedBtn.style.background = '#e3f2fd';
                    selectedBtn.style.borderColor = '#667eea';
                    document.getElementById('nextBtn').disabled = false;
                }
            }
        }

        // 결과 계산
        function calculateResult() {
            scores = {};
            
            // 모든 캐릭터 점수 초기화
            Object.keys(characters).forEach(key => {
                scores[key] = 0;
            });
            
            // 답변에 따른 점수 계산
            answers.forEach((answerIndex, questionIndex) => {
                const question = questions[questionIndex];
                const selectedAnswer = question.answers[answerIndex];
                
                Object.keys(selectedAnswer.scores).forEach(character => {
                    scores[character] += selectedAnswer.scores[character];
                });
            });
            
            // 최고 점수 캐릭터 찾기
            let maxScore = 0;
            let resultCharacter = 'tanjiro';
            
            Object.keys(scores).forEach(character => {
                if (scores[character] > maxScore) {
                    maxScore = scores[character];
                    resultCharacter = character;
                }
            });
            
            showResult(resultCharacter);
        }

        // 결과 표시
        function showResult(characterKey) {
            const character = characters[characterKey];
            
            document.getElementById('questionScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            // 캐릭터 정보 표시
            document.getElementById('resultEmoji').textContent = character.emoji;
            document.getElementById('characterName').textContent = character.name;
            document.getElementById('characterTitle').textContent = character.title;
            document.getElementById('characterSubtitle').textContent = character.subtitle;
            document.getElementById('characterDescription').textContent = character.description;
            
            // 결과 이미지
            const resultImage = document.getElementById('resultImage');
            const imagePath = findImagePath(`images/results/${characterKey}`);
            resultImage.src = imagePath;
            resultImage.onerror = function() {
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZjBmMGYwIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+' + character.emoji + '</text><text x="150" y="170" font-family="sans-serif" font-size="14" fill="#999999" text-anchor="middle" dy=".3em">' + character.name + '</text></svg>';
            };
            
            // 궁합 캐릭터 표시
            showCompatibilityImages(character.compatible, 'compatibleImages');
            showCompatibilityImages(character.incompatible, 'incompatibleImages');
            
            // URL 업데이트 (공유용)
            const url = new URL(window.location);
            url.searchParams.set('result', characterKey);
            window.history.pushState({}, '', url);
        }

        // 궁합 이미지 표시
        function showCompatibilityImages(characterKeys, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            characterKeys.forEach(key => {
                const character = characters[key];
                const imageDiv = document.createElement('div');
                imageDiv.className = 'compat-image';
                
                const img = document.createElement('img');
                const imagePath = findImagePath(`images/compatibility/${key}`);
                img.src = imagePath;
                img.alt = character.name;
                img.title = character.name;
                img.onerror = function() {
                    this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjZjBmMGYwIi8+Cjx0ZXh0IHg9IjYwIiB5PSI1NSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPicgKyBjaGFyYWN0ZXIuZW1vamkgKyAnPC90ZXh0Pjx0ZXh0IHg9IjYwIiB5PSI3NSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj4nICsgY2hhcmFjdGVyLm5hbWUgKyAnPC90ZXh0Pjwvc3ZnPg==';
                };
                
                imageDiv.appendChild(img);
                container.appendChild(imageDiv);
            });
        }

        // 테스트 재시작
        function restartTest() {
            currentQuestion = 0;
            answers = [];
            scores = {};
            
            // URL 파라미터 제거
            const url = new URL(window.location);
            url.searchParams.delete('result');
            window.history.pushState({}, '', url);
            
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        // 결과 공유
        function shareResult() {
            const currentUrl = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: '귀멸의 칼날 직장인 성향 테스트',
                    text: '나의 직장 내 성향을 알아보세요!',
                    url: currentUrl
                });
            } else {
                // 클립보드에 복사
                navigator.clipboard.writeText(currentUrl).then(() => {
                    alert('링크가 클립보드에 복사되었습니다!');
                }).catch(() => {
                    // 클립보드 복사 실패시 대체 방법
                    const textArea = document.createElement('textarea');
                    textArea.value = currentUrl;
                    document.body.appendChild(textArea);
                    textArea.select();
                    try {
                        document.execCommand('copy');
                        alert('링크가 클립보드에 복사되었습니다!');
                    } catch (err) {
                        alert('링크 복사에 실패했습니다. 수동으로 복사해주세요:\n' + currentUrl);
                    }
                    document.body.removeChild(textArea);
                });
            }
        }

        // 페이지 로드시 URL 파라미터 확인
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const resultParam = urlParams.get('result');
            
            if (resultParam && characters[resultParam]) {
                // 공유된 결과 직접 표시
                document.getElementById('startScreen').classList.add('hidden');
                showResult(resultParam);
            }
        });

        // 키보드 네비게이션
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && !document.getElementById('prevBtn').disabled) {
                previousQuestion();
            } else if (e.key === 'ArrowRight' && !document.getElementById('nextBtn').disabled) {
                nextQuestion();
            } else if (e.key >= '1' && e.key <= '4') {
                const answerIndex = parseInt(e.key) - 1;
                const answerBtns = document.querySelectorAll('.answer-btn');
                if (answerBtns[answerIndex]) {
                    selectAnswer(answerIndex);
                }
            }
        });
    </script>
</body>
</html>
