<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>귀멸의 칼날 직장인 버전 테스트</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .start-screen, .question-screen, .result-screen {
            text-align: center;
        }

        .hidden {
            display: none;
        }

        h1 {
            color: #333;
            font-size: 2em;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .main-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 15px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .question-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .question-number {
            color: #667eea;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .answer-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .answer-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            padding: 10px 20px;
            background: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-btn:hover:not(:disabled) {
            background: #667eea;
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 5px;
            transition: width 0.3s;
        }

        .result-title {
            color: #667eea;
            font-size: 1.5em;
            margin: 20px 0;
        }

        .result-subtitle {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .result-description {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.8;
            color: #333;
            margin: 20px 0;
            text-align: left;
        }

        .compatibility-section {
            margin: 30px 0;
        }

        .compatibility-title {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 15px;
        }

        .compatibility-images {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
        }

        .compat-img {
            width: 150px;
            height: 150px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            object-fit: cover;
        }

        .action-buttons {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .retry-btn {
            background: #667eea;
            color: white;
        }

        .share-btn {
            background: #4CAF50;
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .character-emoji {
            font-size: 3em;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.5em;
            }
            
            .main-image {
                max-width: 100%;
            }
            
            .compat-img {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 시작 화면 -->
        <div class="start-screen" id="startScreen">
            <h1>귀멸의 칼날<br>직장인 버전 테스트</h1>
            <p style="color: #666; margin-bottom: 20px;">나는 어떤 직장인 유형일까?</p>
            <img src="images/start/main.jpg" alt="메인 이미지" class="main-image" onerror="this.style.display='none'; this.insertAdjacentHTML('afterend', '<div style=\'width:100%;max-width:500px;height:500px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:15px;margin:20px auto;display:flex;align-items:center;justify-content:center;color:white;font-size:2em;\'>귀멸의 칼날<br>직장인 테스트</div>')">
            <button class="start-btn" onclick="startTest()">테스트 시작하기</button>
        </div>

        <!-- 질문 화면 -->
        <div class="question-screen hidden" id="questionScreen">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            <div class="question-container">
                <div class="question-number" id="questionNumber"></div>
                <div class="question" id="questionText"></div>
                <div id="answersContainer"></div>
            </div>
            <div class="navigation">
                <button class="nav-btn" id="prevBtn" onclick="prevQuestion()">이전</button>
                <button class="nav-btn" id="nextBtn" onclick="nextQuestion()" disabled>다음</button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div class="result-screen hidden" id="resultScreen">
            <h1 id="characterName"></h1>
            <div class="result-title" id="characterTitle"></div>
            <div class="result-subtitle" id="characterSubtitle"></div>
            <div class="character-emoji" id="characterEmoji"></div>
            <img id="resultImage" class="main-image" alt="결과 이미지">
            <div class="result-description" id="characterDescription"></div>
            
            <div class="compatibility-section">
                <div class="compatibility-title">🎯 나와 찰떡 궁합</div>
                <div class="compatibility-images" id="goodCompatibility"></div>
            </div>
            
            <div class="compatibility-section">
                <div class="compatibility-title">⚡ 나와 상극 궁합</div>
                <div class="compatibility-images" id="badCompatibility"></div>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn retry-btn" onclick="retryTest()">다시 테스트하기</button>
                <button class="action-btn share-btn" onclick="shareResult()">친구에게 공유하기</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "프로젝트 데드라인이 다가올 때 당신의 스타일은?",
                answers: [
                    { text: "팀원들과 함께 밤을 새워서라도 완성한다", points: { tanjiro: 3, rengoku: 2, mitsuri: 1 } },
                    { text: "철저한 계획과 시간 관리로 여유롭게 마감한다", points: { shinobu: 3, giyu: 2, muichiro: 1 } },
                    { text: "마지막 순간에 놀라운 집중력을 발휘한다", points: { zenitsu: 3, muichiro: 2, inosuke: 1 } },
                    { text: "남들보다 더 높은 목표를 세우고 초과 달성한다", points: { muzan: 3, akaza: 2, sanemi: 1 } }
                ]
            },
            {
                question: "회의 중 의견 충돌이 생겼을 때 당신은?",
                answers: [
                    { text: "중재자 역할을 하며 모두의 의견을 조율한다", points: { tanjiro: 3, gyomei: 2, mitsuri: 1 } },
                    { text: "데이터와 논리로 객관적인 해결책을 제시한다", points: { giyu: 3, shinobu: 2, iguro: 1 } },
                    { text: "내 의견을 강하게 주장하고 관철시킨다", points: { inosuke: 3, sanemi: 2, akaza: 1 } },
                    { text: "조용히 듣다가 핵심을 찌르는 한 마디를 한다", points: { nezuko: 3, muichiro: 2, giyu: 1 } }
                ]
            },
            {
                question: "신입사원이 실수를 했을 때 당신의 반응은?",
                answers: [
                    { text: "격려하며 함께 해결 방법을 찾아준다", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "실수의 원인을 분석하고 재발 방지책을 세운다", points: { shinobu: 3, iguro: 2, zenitsu: 1 } },
                    { text: "엄격하게 지적하고 다시는 일어나지 않도록 한다", points: { sanemi: 3, muzan: 2, akaza: 1 } },
                    { text: "별 말 없이 내가 직접 처리한다", points: { giyu: 3, nezuko: 2, muichiro: 1 } }
                ]
            },
            {
                question: "팀 회식 자리에서 당신의 모습은?",
                answers: [
                    { text: "분위기 메이커로 모두를 즐겁게 한다", points: { rengoku: 3, tengen: 2, mitsuri: 1 } },
                    { text: "적당히 참여하다가 일찍 빠진다", points: { giyu: 3, muichiro: 2, iguro: 1 } },
                    { text: "술 마시며 평소 못했던 속마음을 털어놓는다", points: { zenitsu: 3, sanemi: 2, inosuke: 1 } },
                    { text: "조용히 듣고 있다가 필요할 때만 이야기한다", points: { nezuko: 3, gyomei: 2, shinobu: 1 } }
                ]
            },
            {
                question: "새로운 업무를 배정받았을 때 첫 반응은?",
                answers: [
                    { text: "도전적이네! 새로운 걸 배울 수 있겠다", points: { inosuke: 3, rengoku: 2, tengen: 1 } },
                    { text: "체계적으로 계획을 세우고 차근차근 진행한다", points: { shinobu: 3, giyu: 2, gyomei: 1 } },
                    { text: "걱정부터 하지만 결국은 완벽하게 해낸다", points: { zenitsu: 3, muichiro: 2, nezuko: 1 } },
                    { text: "이 일이 조직에 어떤 가치를 줄지 먼저 생각한다", points: { muzan: 3, akaza: 2, iguro: 1 } }
                ]
            },
            {
                question: "칭찬을 받았을 때 당신의 반응은?",
                answers: [
                    { text: "팀원들과 함께 이뤄낸 성과라고 겸손하게 말한다", points: { tanjiro: 3, gyomei: 2, nezuko: 1 } },
                    { text: "당연한 결과다! 더 높은 목표를 향해 간다", points: { inosuke: 3, tengen: 2, akaza: 1 } },
                    { text: "쑥스러워하며 얼른 화제를 돌린다", points: { zenitsu: 3, mitsuri: 2, nezuko: 1 } },
                    { text: "무덤덤하게 받아들이고 다음 일에 집중한다", points: { giyu: 3, muichiro: 2, sanemi: 1 } }
                ]
            },
            {
                question: "스트레스가 심할 때 당신의 해소법은?",
                answers: [
                    { text: "운동이나 액티비티로 땀을 흘린다", points: { inosuke: 3, sanemi: 2, rengoku: 1 } },
                    { text: "혼자만의 시간을 가지며 충전한다", points: { giyu: 3, muichiro: 2, nezuko: 1 } },
                    { text: "친한 사람들과 수다 떨며 스트레스를 푼다", points: { mitsuri: 3, zenitsu: 2, tengen: 1 } },
                    { text: "일에 더 몰입해서 스트레스를 잊는다", points: { muzan: 3, akaza: 2, iguro: 1 } }
                ]
            },
            {
                question: "중요한 프레젠테이션을 앞두고 있을 때?",
                answers: [
                    { text: "화려한 비주얼과 임팩트 있는 스토리로 준비한다", points: { tengen: 3, rengoku: 2, mitsuri: 1 } },
                    { text: "데이터와 논리로 무장한 완벽한 자료를 만든다", points: { shinobu: 3, giyu: 2, iguro: 1 } },
                    { text: "긴장되지만 순간의 집중력으로 승부한다", points: { zenitsu: 3, muichiro: 2, tanjiro: 1 } },
                    { text: "압도적인 카리스마로 청중을 사로잡는다", points: { muzan: 3, akaza: 2, sanemi: 1 } }
                ]
            },
            {
                question: "팀 프로젝트에서 선호하는 역할은?",
                answers: [
                    { text: "모두를 이끄는 리더 역할", points: { rengoku: 3, muzan: 2, tanjiro: 1 } },
                    { text: "꼼꼼한 품질 관리 및 검토 역할", points: { zenitsu: 3, iguro: 2, shinobu: 1 } },
                    { text: "창의적인 아이디어 제안 역할", points: { tengen: 3, muichiro: 2, inosuke: 1 } },
                    { text: "묵묵히 실무를 처리하는 역할", points: { nezuko: 3, giyu: 2, gyomei: 1 } }
                ]
            },
            {
                question: "실패했을 때 당신의 대처법은?",
                answers: [
                    { text: "실패에서 배우고 더 강해져서 돌아온다", points: { tanjiro: 3, rengoku: 2, akaza: 1 } },
                    { text: "철저히 분석해서 같은 실수를 반복하지 않는다", points: { shinobu: 3, giyu: 2, iguro: 1 } },
                    { text: "좌절하지만 주변의 도움으로 다시 일어선다", points: { zenitsu: 3, mitsuri: 2, nezuko: 1 } },
                    { text: "실패를 인정하지 않고 더 큰 목표를 세운다", points: { muzan: 3, inosuke: 2, sanemi: 1 } }
                ]
            },
            {
                question: "동료가 힘들어할 때 당신은?",
                answers: [
                    { text: "진심으로 공감하고 위로해준다", points: { tanjiro: 3, mitsuri: 2, gyomei: 1 } },
                    { text: "실질적인 해결책을 제시해준다", points: { shinobu: 3, giyu: 2, nezuko: 1 } },
                    { text: "함께 신나게 놀며 기분전환을 시켜준다", points: { inosuke: 3, tengen: 2, rengoku: 1 } },
                    { text: "각자 알아서 해결해야 한다고 생각한다", points: { muzan: 3, sanemi: 2, iguro: 1 } }
                ]
            },
            {
                question: "이상적인 직장 문화는?",
                answers: [
                    { text: "가족 같은 분위기의 따뜻한 직장", points: { tanjiro: 3, mitsuri: 2, nezuko: 1 } },
                    { text: "개인의 전문성을 존중하는 직장", points: { giyu: 3, muichiro: 2, shinobu: 1 } },
                    { text: "열정적이고 도전적인 직장", points: { rengoku: 3, inosuke: 2, tengen: 1 } },
                    { text: "성과 중심의 경쟁적인 직장", points: { muzan: 3, akaza: 2, sanemi: 1 } }
                ]
            }
        ];

        const characters = {
            tanjiro: {
                name: '카마도 탄지로',
                title: '팀워크의 달인',
                subtitle: '프로젝트 매니저',
                emoji: '🌱',
                description: '당신은 팀워크를 중시하고 모든 구성원을 배려하는 완벽한 프로젝트 매니저입니다. 어려운 상황에서도 포기하지 않는 끈기와 팀원들을 하나로 묶는 특별한 능력을 가지고 있습니다. 갈등 상황에서는 중재자 역할을 하며, 항상 긍정적인 에너지로 팀 분위기를 이끌어갑니다.',
                compatible: ['nezuko', 'mitsuri'],
                incompatible: ['muzan', 'sanemi']
            },
            nezuko: {
                name: '카마도 네즈코',
                title: '묵묵한 지원자',
                subtitle: '백오피스 전문가',
                emoji: '🌸',
                description: '당신은 말보다는 행동으로 보여주는 신뢰할 수 있는 백오피스 전문가입니다. 화려하지 않지만 꼭 필요한 업무를 완벽하게 처리하며, 팀원들이 안심하고 일할 수 있는 든든한 지원을 제공합니다. 조용하지만 강한 의지력으로 어떤 난관도 극복해냅니다.',
                compatible: ['tanjiro', 'giyu'],
                incompatible: ['tengen', 'inosuke']
            },
            zenitsu: {
                name: '아가츠마 젠이츠',
                title: '완벽주의자',
                subtitle: '품질관리 전문가',
                emoji: '⚡',
                description: '당신은 디테일에 강하고 품질에 대한 높은 기준을 가진 완벽주의자입니다. 평소에는 걱정이 많지만, 중요한 순간에는 놀라운 집중력과 전문성을 발휘합니다. 실수를 용납하지 않는 철저함으로 최고 품질의 결과물을 만들어냅니다.',
                compatible: ['shinobu', 'mitsuri'],
                incompatible: ['inosuke', 'sanemi']
            },
            inosuke: {
                name: '하시비라 이노스케',
                title: '도전정신 넘치는',
                subtitle: '영업팀 에이스',
                emoji: '🐗',
                description: '당신은 넘치는 에너지와 도전정신으로 무장한 영업팀의 에이스입니다. 어떤 어려운 고객이라도 정면승부로 돌파하며, 경쟁 상황에서 더욱 빛을 발합니다. 때로는 무모해 보일 수 있지만, 그 열정과 추진력으로 불가능을 가능하게 만듭니다.',
                compatible: ['tanjiro', 'rengoku'],
                incompatible: ['giyu', 'nezuko']
            },
            giyu: {
                name: '토미오카 기유',
                title: '냉철한 분석가',
                subtitle: '전략기획팀장',
                emoji: '🌊',
                description: '당신은 감정에 휘둘리지 않고 냉철하게 상황을 분석하는 전략기획 전문가입니다. 말수는 적지만 핵심을 정확히 파악하고, 논리적이고 체계적인 접근으로 최적의 해결책을 제시합니다. 혼자서도 묵묵히 성과를 만들어내는 독립적인 업무 스타일을 가지고 있습니다.',
                compatible: ['nezuko', 'muichiro'],
                incompatible: ['tengen', 'mitsuri']
            },
            rengoku: {
                name: '렌고쿠 쿄쥬로',
                title: '열정적인 리더',
                subtitle: '팀장',
                emoji: '🔥',
                description: '당신은 불타는 열정으로 팀을 이끄는 천생 리더입니다. 긍정적인 에너지와 강한 신념으로 팀원들에게 영감을 주며, 어려운 상황에서도 희망을 잃지 않습니다. 솔선수범하는 모습으로 팀원들의 존경을 받고, 모든 사람의 성장을 진심으로 응원합니다.',
                compatible: ['inosuke', 'mitsuri'],
                incompatible: ['muzan', 'akaza']
            },
            tengen: {
                name: '우즈이 텐겐',
                title: '화려한 크리에이터',
                subtitle: '마케팅 디렉터',
                emoji: '💎',
                description: '당신은 창의성과 화려함을 겸비한 마케팅의 달인입니다. 독특하고 임팩트 있는 아이디어로 사람들의 관심을 사로잡으며, 트렌드를 선도하는 감각을 가지고 있습니다. 자신감 넘치는 스타일로 브랜드의 가치를 높이고, 시장에서 차별화된 포지션을 만들어냅니다.',
                compatible: ['shinobu', 'mitsuri'],
                incompatible: ['giyu', 'muichiro']
            },
            shinobu: {
                name: '코쵸 시노부',
                title: '전략적 기획자',
                subtitle: '경영전략팀',
                emoji: '🦋',
                description: '당신은 우아하면서도 날카로운 통찰력을 가진 전략적 사고의 전문가입니다. 겉으로는 부드럽지만 속으로는 치밀하게 계획을 세우며, 상대방의 심리를 정확히 파악하여 최적의 전략을 수립합니다. 복잡한 상황에서도 침착하게 핵심을 찾아내는 능력이 뛰어납니다.',
                compatible: ['zenitsu', 'tengen'],
                incompatible: ['inosuke', 'rengoku']
            },
            muichiro: {
                name: '토키토 무이치로',
                title: '집중력의 달인',
                subtitle: '개발자',
                emoji: '☁️',
                description: '당신은 놀라운 집중력으로 복잡한 문제를 해결하는 개발 전문가입니다. 주변의 소음에 흔들리지 않고 자신만의 세계에서 몰입하여 뛰어난 결과물을 만들어냅니다. 때로는 몽환적으로 보일 수 있지만, 핵심 순간에는 번개 같은 직감과 실행력을 보여줍니다.',
                compatible: ['giyu', 'gyomei'],
                incompatible: ['tengen', 'sanemi']
            },
            mitsuri: {
                name: '칸로지 미츠리',
                title: '소통의 전문가',
                subtitle: '인사팀 매니저',
                emoji: '💕',
                description: '당신은 밝고 따뜻한 성격으로 사람들과의 소통을 즐기는 인사 전문가입니다. 팀원들의 고민을 진심으로 들어주고, 모든 사람이 편안하게 일할 수 있는 환경을 만듭니다. 강한 공감 능력과 포용력으로 조직의 화합을 이끌어내는 특별한 재능을 가지고 있습니다.',
                compatible: ['tanjiro', 'rengoku'],
                incompatible: ['giyu', 'akaza']
            },
            sanemi: {
                name: '시나즈가와 사네미',
                title: '강인한 실행자',
                subtitle: '현장관리팀장',
                emoji: '💨',
                description: '당신은 거친 외모 뒤에 강한 책임감을 가진 현장 관리의 전문가입니다. 타협하지 않는 원칙주의자로서 품질과 안전에 대한 기준이 매우 높으며, 어려운 상황에서도 팀을 보호하기 위해 앞장섭니다. 직설적인 소통 방식이지만 진심어린 배려가 담겨있습니다.',
                compatible: ['gyomei', 'inosuke'],
                incompatible: ['tanjiro', 'zenitsu']
            },
            gyomei: {
                name: '히메지마 교메이',
                title: '신중한 관리자',
                subtitle: '운영총괄임원',
                emoji: '🏔️',
                description: '당신은 깊은 경험과 통찰력을 바탕으로 조직 전체를 관리하는 운영 총괄 전문가입니다. 신중하고 사려깊은 판단으로 큰 그림을 그리며, 모든 결정에 책임을 집니다. 팀원들에게는 든든한 버팀목이 되어주며, 위기 상황에서도 흔들리지 않는 안정감을 제공합니다.',
                compatible: ['muichiro', 'tanjiro'],
                incompatible: ['muzan', 'tengen']
            },
            muzan: {
                name: '키부츠지 무잔',
                title: '절대적 권력자',
                subtitle: 'CEO',
                emoji: '👑',
                description: '당신은 카리스마와 강력한 리더십으로 조직을 이끄는 최고경영자입니다. 높은 기준과 완벽을 추구하며, 결과에 대한 책임을 철저히 집니다. 때로는 냉혹해 보일 수 있지만, 조직의 성공을 위해서는 어떤 어려운 결정도 내릴 수 있는 강한 의지력을 가지고 있습니다.',
                compatible: ['akaza', 'iguro'],
                incompatible: ['tanjiro', 'rengoku']
            },
            akaza: {
                name: '아카자',
                title: '성과주의자',
                subtitle: '영업총괄',
                emoji: '👊',
                description: '당신은 끝없는 성장 욕구와 경쟁심으로 무장한 영업 총괄 전문가입니다. 목표 달성에 대한 집착이 강하며, 자신과 팀의 한계를 뛰어넘기 위해 끊임없이 노력합니다. 강한 실적 압박 속에서도 더 높은 성과를 향해 전진하는 불굴의 정신력을 가지고 있습니다.',
                compatible: ['muzan', 'sanemi'],
                incompatible: ['mitsuri', 'rengoku']
            },
            iguro: {
                name: '이구로 오바나이',
                title: '엄격한 관리자',
                subtitle: '컴플라이언스 팀장',
                emoji: '🐍',
                description: '당신은 높은 기준과 철저한 원칙으로 무장한 컴플라이언스 전문가입니다. 세심한 관찰력으로 작은 허점도 놓치지 않으며, 규정과 절차를 완벽하게 준수합니다. 때로는 까다롭게 느껴질 수 있지만, 조직의 리스크를 사전에 차단하고 품질을 보장하는 핵심적인 역할을 담당합니다. 신뢰할 수 있는 사람에게만 마음을 여는 신중하고 완고한 전문가입니다.',
                compatible: ['muzan', 'shinobu'],
                incompatible: ['inosuke', 'tengen']
            }
        };

        let currentQuestion = 0;
        let answers = [];
        let scores = {};

        // 캐릭터별 점수 초기화
        for (let char in characters) {
            scores[char] = 0;
        }

        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('questionScreen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Q${currentQuestion + 1}/12`;
            document.getElementById('questionText').textContent = q.question;
            
            const progressPercent = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progressPercent + '%';
            
            const container = document.getElementById('answersContainer');
            container.innerHTML = '';
            
            q.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = answer.text;
                btn.onclick = () => selectAnswer(index);
                if (answers[currentQuestion] === index) {
                    btn.style.background = '#667eea';
                    btn.style.color = 'white';
                }
                container.appendChild(btn);
            });
            
            // 네비게이션 버튼 상태 업데이트
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = answers[currentQuestion] === undefined;
            
            if (currentQuestion === questions.length - 1) {
                document.getElementById('nextBtn').textContent = '결과 보기';
            } else {
                document.getElementById('nextBtn').textContent = '다음';
            }
        }

        function selectAnswer(index) {
            answers[currentQuestion] = index;
            
            // 버튼 스타일 업데이트
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach((btn, i) => {
                if (i === index) {
                    btn.style.background = '#667eea';
                    btn.style.color = 'white';
                } else {
                    btn.style.background = 'white';
                    btn.style.color = '#333';
                }
            });
            
            document.getElementById('nextBtn').disabled = false;
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) return;
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                calculateResult();
            }
        }

        function calculateResult() {
            // 점수 계산
            answers.forEach((answerIndex, questionIndex) => {
                const question = questions[questionIndex];
                const answer = question.answers[answerIndex];
                for (let char in answer.points) {
                    scores[char] += answer.points[char];
                }
            });
            
            // 최고 점수 캐릭터 찾기
            let maxScore = 0;
            let resultCharacter = '';
            for (let char in scores) {
                if (scores[char] > maxScore) {
                    maxScore = scores[char];
                    resultCharacter = char;
                }
            }
            
            showResult(resultCharacter);
        }

        function showResult(characterKey) {
            const character = characters[characterKey];
            
            document.getElementById('questionScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            document.getElementById('characterName').textContent = character.name;
            document.getElementById('characterTitle').textContent = character.title;
            document.getElementById('characterSubtitle').textContent = character.subtitle;
            document.getElementById('characterEmoji').textContent = character.emoji;
            document.getElementById('characterDescription').textContent = character.description;
            
            // 결과 이미지 설정
            const resultImg = document.getElementById('resultImage');
            const imagePaths = [
                `images/results/${characterKey}.jpg`,
                `images/results/${characterKey}.jpeg`,
                `images/results/${characterKey}.png`
            ];
            
            tryLoadImage(resultImg, imagePaths, 0, character.emoji);
            
            // 궁합 이미지 설정
            const goodContainer = document.getElementById('goodCompatibility');
            const badContainer = document.getElementById('badCompatibility');
            
            goodContainer.innerHTML = '';
            badContainer.innerHTML = '';
            
            character.compatible.forEach(compat => {
                const img = document.createElement('img');
                img.className = 'compat-img';
                img.alt = characters[compat].name;
                img.title = characters[compat].name + ' - ' + characters[compat].title;
                
                const compatPaths = [
                    `images/compatibility/${compat}.jpg`,
                    `images/compatibility/${compat}.jpeg`,
                    `images/compatibility/${compat}.png`
                ];
                
                tryLoadImage(img, compatPaths, 0, characters[compat].emoji);
                goodContainer.appendChild(img);
            });
            
            character.incompatible.forEach(incompat => {
                const img = document.createElement('img');
                img.className = 'compat-img';
                img.alt = characters[incompat].name;
                img.title = characters[incompat].name + ' - ' + characters[incompat].title;
                
                const incompatPaths = [
                    `images/compatibility/${incompat}.jpg`,
                    `images/compatibility/${incompat}.jpeg`,
                    `images/compatibility/${incompat}.png`
                ];
                
                tryLoadImage(img, incompatPaths, 0, characters[incompat].emoji);
                badContainer.appendChild(img);
            });
            
            // URL 파라미터 업데이트 (결과 공유용)
            const url = new URL(window.location);
            url.searchParams.set('result', characterKey);
            window.history.pushState({}, '', url);
        }

        function tryLoadImage(img, paths, index, emoji) {
            if (index >= paths.length) {
                // 모든 경로 실패 시 이모지 표시
                img.style.display = 'none';
                const emojiDiv = document.createElement('div');
                emojiDiv.style.cssText = 'width:150px;height:150px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px;display:flex;align-items:center;justify-content:center;color:white;font-size:3em;box-shadow:0 5px 15px rgba(0,0,0,0.2);';
                emojiDiv.textContent = emoji;
                img.parentNode.replaceChild(emojiDiv, img);
                return;
            }
            
            img.src = paths[index];
            img.onerror = () => tryLoadImage(img, paths, index + 1, emoji);
        }

        function retryTest() {
            currentQuestion = 0;
            answers = [];
            for (let char in characters) {
                scores[char] = 0;
            }
            
            const url = new URL(window.location);
            url.searchParams.delete('result');
            window.history.pushState({}, '', url);
            
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        function shareResult() {
            const url = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: '귀멸의 칼날 직장인 버전 테스트',
                    text: '나의 직장인 유형은? 지금 테스트해보세요!',
                    url: url
                }).catch(err => {
                    copyToClipboard(url);
                });
            } else {
                copyToClipboard(url);
            }
        }

        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            alert('링크가 복사되었습니다!');
        }

        // 페이지 로드 시 URL 파라미터 확인
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const resultParam = urlParams.get('result');
            
            if (resultParam && characters[resultParam]) {
                document.getElementById('startScreen').classList.add('hidden');
                showResult(resultParam);
            }
        });
    </script>
</body>
</html>
